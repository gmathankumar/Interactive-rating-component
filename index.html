<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
  <link rel="stylesheet" href="style.css">
  <title>Frontend Mentor | Interactive rating component</title>
</head>

<body>
  <form id="rating" action="" method="post" class="card">
    <img src="/images/icon-star.svg" alt="rating icon" id="star" />
    <h1>How did we do?</h1>
    <p>
      Please let us know how we did with your support request. All feedback is
      appreciated to help us improve our offering!
    </p>
    <div class="flexbox" id="options">
      <label for="rate1" class="opt">1</label>
      <input type="radio" name="rate" id="rate1" value="1" />
      <label for="rate2" class="opt">2</label>
      <input type="radio" name="rate" id="rate2" value="2" />
      <label for="rate3" class="opt">3</label>
      <input type="radio" name="rate" id="rate3" value="3" />
      <label for="rate4" class="opt">4</label>
      <input type="radio" name="rate" id="rate4" value="4" />
      <label for="rate5" class="opt">5</label>
      <input type="radio" name="rate" id="rate5" value="5" />
    </div>

    <input type="submit" class="btn" value="Submit" id="submitBtn" />
  </form>

  <div id="thankYou" class="card">
    <div class="imgBlock"></div>
    <p class="message">
      You selected <span class="userValue">0</span> out of 5
    </p>

    <h2>Thank you!</h2>
    <p>
      We appreciate you taking the time to give a rating. If you ever need
      more support, donâ€™t hesitate to get in touch!
    </p>
  </div>

  <script type="text/javascript">
    var getSiblings = function (elem) {
      var siblings = [];
      var sibling = elem.parentNode.firstChild;
      while (sibling) {
        if (sibling.nodeType === 1 && sibling !== elem) {
          siblings.push(sibling);
        }
        sibling = sibling.nextSibling;
      }
      return siblings;
    };
    var userInput;
    var opt = document.querySelectorAll("input[name=rate]");
    for (let i of opt) {
      i.addEventListener("click", function () {
        userInput = i.value;
        let rateNum = "label[for=rate" + i.value + "]";
        let optBtn = document.querySelector(rateNum);
        optBtn.style.backgroundColor = "var(--orange)";
        let sib = getSiblings(optBtn);
        for (let i in sib) {
          sib[i].style.backgroundColor = "var(--mediumGreyOp)";
        }
      });
    }
    var userValue = document.querySelector(".userValue");
    var submitBtn = document.getElementById("submitBtn");

    submitBtn.addEventListener("click", function () {
      event.preventDefault();
      userValue.innerHTML = userInput;
      let pop = document.getElementById("thankYou");
      pop.style.display = "block";
      rating.style.display = "none";

      setTimeout(() => {
        window.location.reload();
      }, 5000);
    });
  </script>
</body>
</html>